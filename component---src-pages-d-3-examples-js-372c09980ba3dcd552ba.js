(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{157:function(e,t,a){"use strict";a.r(t),a(83),a(387),a(37),a(28),a(84),a(59),a(90);var n=a(388),r=a.n(n),s=(a(236),a(389)),l=a.n(s),c=a(13),o=a.n(c),i=a(0),u=a.n(i),p=a(805),d=a(794),m=a(456),h=a(338),f=a(275),v=a(194),g=a(796),y=a(795),x=a(793),b=a(797),w=a(598),k=l()(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.locations.map(function(){var e=l()(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/forecast?id="+t._id+"&units=metric&APPID="+w.key);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),a=t.map(function(){var e=l()(r.a.mark(function e(t){var a,n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return a=e.sent,n=a.city.name+", "+a.city.country,s=a.list.map(function(e){return{dateTime:e.dt,temp:e.main.temp,humidity:e.main.humidity}}),e.abrupt("return",{name:n,forecast:s});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",{apiResults:{response:"success",results:a}});case 3:case"end":return e.stop()}},e,this)})),C={dataset:[5,10,13,19,21,25,22,18,15,13,11,12,15,20,18,17,16,18,23,25],node:null,x:null,y:null,margin:{top:25,right:10,bottom:25,left:50}},E=a(807),D=a(806),A=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={},t}return o()(t,e),t.prototype.render=function(e){var t=void 0===e?this.props:e,a=t.handleChange,n=t.parentState;return u.a.createElement(E.a,null,u.a.createElement(E.a.Field,null,"Selected value: ",u.a.createElement("b",null,n)),u.a.createElement(E.a.Field,null,u.a.createElement(D.a,{radio:!0,label:"Clear",name:"checkboxRadioGroup",value:"clear",checked:"clear"===n,onChange:a})),u.a.createElement(E.a.Field,null,u.a.createElement(D.a,{radio:!0,label:"Weather Data",name:"checkboxRadioGroup",value:"weather",checked:"weather"===n,onChange:a})))},t}(i.Component),S=".graph-canvas",G=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).state={weatherData:null,canvas:null,select:"clear",d3populated:!1},t.handleSelectChange=function(e,a){var n=a.value;t.setState({select:n})},t.clearGraph=function(){d3.select(S).selectAll("*").remove()},t.populateWeather=l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getWeatherData();case 2:if(!((a=e.sent)&&a.apiResults.results.length>0)){e.next=12;break}return e.t0=t,e.next=7,t.getWeatherData();case 7:e.t1=e.sent,e.t2={weatherData:e.t1},e.t0.setState.call(e.t0,e.t2),t.setState({canvas:t.scaffoldCanvas()}),t.populateGraph();case 12:case"end":return e.stop()}},e,this)})),t.componentDidUpdate=function(){"weather"!==t.state.select||t.state.d3populated||(t.setState({d3populated:!0}),t.populateWeather()),"clear"===t.state.select&&t.state.d3populated&&(t.setState({d3populated:!1}),d.a(S).selectAll("svg").remove())},t.getWeatherData=l()(r.a.mark(function e(){var t,a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,k();case 4:return t=e.sent,e.next=7,Promise.all(t.apiResults.results);case 7:return a=e.sent,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},e.abrupt("return",n({},t,{apiResults:n({},t.apiResults,{results:a})}));case 10:case"end":return e.stop()}},e,this)})),t.scaffoldCanvas=function(){var e=document.getElementById("graph-canvas-weather"),a=d.a(S).append("svg").attr("height",e.clientHeight).attr("width",e.clientWidth),n=e.clientWidth-(C.margin.left+C.margin.right),r=e.clientHeight-(C.margin.top+C.margin.bottom),s=a.append("g").attr("transform","translate("+C.margin.left+","+C.margin.top+")"),l=m.b().key(function(e){return e.name}).rollup(function(e){return e[0]}).entries(t.state.weatherData.apiResults.results);return Object.assign({},C,{x:n,y:r,node:s,dataset:l})},t.populateGraph=function(){h.b("%Y-%m-%dT%H:%M"),h.a("%Y-%m-%dT%H:%M"),t.state.canvas.dataset[0].value.forecast;var e=[v.d(t.state.canvas.dataset[0].value.forecast,function(e){return new Date(1e3*e.dateTime)})],a=g.c().range([0,t.state.canvas.x]).domain(e[0]),n=m.b().key(function(e){return v.e(e.value.forecast,function(e){return e.temp})}).map(t.state.canvas.dataset).keys(),r=v.e(n),s=v.f(n),l=g.a().range([t.state.canvas.y,0]).domain([s-50,r]),c=g.b(y.a).domain(t.state.weatherData.apiResults.results.map(function(e){return e.name})),o=x.d().curve(x.b).x(function(e){return a(new Date(1e3*e.dateTime))}).y(function(e){return l(e.temp)});x.a().curve(x.c).x(function(e){return a(new Date(1e3*e.dateTime))}).y0(t.state.canvas.x).y1(function(e){return l(e.temp)}),t.state.canvas.node.append("g"),t.state.canvas.node.append("g").selectAll(".location").data(t.state.weatherData.apiResults.results).enter().append("g").attr("class","location").append("path").attr("class","line").attr("d",function(e){return o(e.forecast)}).style("stroke",function(e){return c(e.name)}).attr("fill","none"),t.state.canvas.node.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+t.state.canvas.y+")").call(b.a(a).tickFormat(function(e){var t,a=h.a(".%L"),n=h.a(":%S"),r=h.a("%H:%M"),s=h.a("%H:00"),l=h.a("%a %d"),c=h.a("%b %d"),o=h.a("%B"),i=h.a("%Y");return t=e,(f.g(t)<t?a:f.d(t)<t?n:f.b(t)<t?r:f.a(t)<t?s:f.f(t)<t?f.j(t)<t?l:c:f.k(t)<t?o:i)(t)})),t.state.canvas.node.append("g").attr("class","axis y-axis").call(b.b(l).ticks(Math.min(Math.round(Math.floor(t.state.canvas.y/35)+1),r),".0f")).append("text").attr("transform","rotate(-90) translate("+-t.state.canvas.y/2+", "+.8*-t.state.canvas.margin.left+")").attr("class","label").attr("text-anchor","middle").style("font-weight","normal").style("font-size","12px").attr("y",6).attr("dy",".35em").attr("fill","#666").text("Temp Â°C"),t.state.canvas.node.selectAll(".y-axis g text").attr("fill","#666"),t.state.canvas.node.selectAll(".y-axis g line").attr("stroke","#666")},t}return o()(t,e),t.prototype.render=function(){return u.a.createElement(p.a,null,u.a.createElement("div",{className:"App"},u.a.createElement(A,{handleChange:this.handleSelectChange,parentState:this.state.select}),u.a.createElement("div",{className:"header"},u.a.createElement("h3",{className:"text-muted"},"D3 Implementations")),u.a.createElement("div",{style:{textAlign:"center",borderBottom:"1px solid #e5e5e5",padding:"0",minHeight:"300px"},className:"jumbotron graph-canvas",id:"graph-canvas-weather"}),u.a.createElement("div",{className:"bs-callout bs-callout-danger"},u.a.createElement("h4",null,"Line Graph of Temperature Forecasts"),u.a.createElement("p",null,"To add labeling, area fill and hover"))))},t}(i.Component);t.default=G},598:function(e,t){e.exports={key:"56c35a841492f8856e471e53ebe6511b",locations:[{_id:2643123,name:"Manchester",country:"GB",coord:{lon:-2.23743,lat:53.480949}},{_id:6612108,name:"Nelson",country:"NZ",coord:{lon:173.284012,lat:-41.270889}},{_id:2191562,name:"Dunedin",country:"NZ",coord:{lon:170.503616,lat:-45.874161}},{_id:5914132,name:"Campbell River",country:"CA",coord:{lon:-125.244591,lat:50.016338}},{_id:2077963,name:"Albany",country:"AU",coord:{lon:117.89167,lat:-35.016941}},{_id:6173331,name:"Vancouver",country:"CA",coord:{lon:-123.119339,lat:49.24966}},{_id:3333204,name:"City of Stoke-on-Trent",country:"GB",coord:{lon:-2.16667,lat:53}},{_id:2648773,name:"Gateshead",country:"GB",coord:{lon:-1.60168,lat:54.96209}},{_id:5978765,name:"Huntsville",country:"CA",coord:{lon:-79.216316,lat:45.333408}},{_id:7535661,name:"London Borough of Harrow",country:"GB",coord:{lon:-.33333,lat:51.566669}}]}}}]);
//# sourceMappingURL=component---src-pages-d-3-examples-js-372c09980ba3dcd552ba.js.map